// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id                      String   @id @default(cuid())
  slNo                    Int?   @default(autoincrement())
  projectName             String
  nodalDepartment         String?
  division                String?
  district                String?
  lac                     String? // Legislative Assembly Constituency
  fundSource              String?
  aaNo                    String? // Administrative Approval Number
  estimatedValue          String?
  pmcWorkOrderDate        String?
  worksWorkOrderDate      String?
  consultantName          String?
  contractorName          String?
  physicalProgress        String?
  financialProgress       String?
  completionDatePerTender String?
  expectedCompletionDate  String?
  provisions              String?
  landStatus              String?
  remarks                 String?
  branch                  String?
  createdAt               DateTime @default(now())
  updatedAt               DateTime @updatedAt

  // User relations
  createdBy String // User ID who created the project
  user      User   @relation(fields: [createdBy], references: [id])

  @@index([projectName])
  @@index([district, division])
  @@index([createdBy])
  @@map("projects")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  role      Role     @default(USER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relation to projects
  projects Project[]

  @@map("users")
}

enum Role {
  USER
  ADMIN
}
